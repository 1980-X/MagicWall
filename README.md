# MagicWall

## 项目简介
MagicWall 是一个完全独立的 Windows 桌面原生应用程序，设计用于 9.05 米 × 1.80 米的物理展示屏幕。该应用允许用户通过点击按钮或热点区域切换页面，并在正常状态下展示循环滚动的动画效果。应用启动时会提示用户选择模式，以便适应不同的使用场景。**本应用不依赖任何浏览器环境，无需安装浏览器，也不需要通过浏览器进行调试，直接运行程序即可使用。**

## 功能特点
- **独立原生应用**：Windows 平台原生应用，完全不依赖任何浏览器环境和浏览器调试工具
- **交互切换**：通过点击按钮或热点区域实现页面切换
- **动画效果**：页面上的小动画循环滚动播放
- **双模式支持**：提供调试模式和产品模式，适应不同场景需求，且两种模式下保持完全一致的视觉和交互体验

## 双模式支持
应用提供两种运行模式，以满足不同场景的需求，且确保两种模式下窗口比例、内部布局、图文内容和动画效果保持完全一致性：

### 调试模式
专为开发人员设计，用于日常开发、调试和画面效果确认。此模式下：
- 窗口尺寸会按照物理屏幕的比例（9.05米 × 1.80米）进行缩放
- 默认高度为600px，宽度按比例自动计算约为3017px
- 可在普通电脑屏幕上运行，无需依赖特定硬件
- **保持与产品模式完全一致的窗口比例、内部布局、图文内容和动画效果**
- 可选启用开发者工具（通过环境变量控制）

### 产品模式
针对 9.05m × 1.80m 大型物理展示屏幕优化的最终展示模式：
- 窗口尺寸设置为9050px × 1800px（对应实际物理尺寸）
- 移除所有调试相关功能，专注于最佳展示效果
- **保持与调试模式完全一致的窗口比例、内部布局、图文内容和动画效果**

**重要说明**：两种模式的核心区别仅在于窗口尺寸，**窗口比例、内部布局、图文内容和动画效果在两种模式下完全一致**。这确保了开发者在普通电脑上调试的效果与最终在物理屏幕上的展示效果完全一致，实现"所见即所得"的开发体验。
- **启动模式选择**：应用启动时会首先显示一个模式选择弹窗，用户需要通过该弹窗明确选择进入调试模式或产品模式。弹窗提供清晰的选项说明，帮助用户根据使用场景做出正确选择。选择后，应用将按照选定的模式进行初始化和显示。
- **无边框窗口**：应用窗口在所有模式下都不显示标准的标题栏（包含关闭、最小化、最大化按钮），提供更沉浸的用户体验
- **响应式设计**：在不同尺寸的屏幕上都能提供良好的用户体验
- **RS232 指令支持**：未来版本将实现通过 RS232 接口接收指令，根据指令内容动态呈现不同页面，增强系统的外部控制能力和集成性
- 窗口布局：主窗口采用分区设计，从左到右分为五个区域
  - 第一个区域为卷首语区，宽度约占总宽度的11.6%
  - 第二至第五个区域平均分布，每个区域宽度约占总宽度的22.1%
  - 实际像素比例参考：1050:2000:2000:2000:2000（从左到右）
  - 所有区域高度相同，均为窗口总高度
  - 布局采用响应式设计，**在调试模式和产品模式下保持完全一致的比例和布局结构**
  - 界面布局完全基于相对单位（百分比）而非绝对值，确保在任何模式和尺寸下都能精确保持设计比例

## 技术栈
- 框架：Electron.js
- 前端：HTML, CSS, JavaScript
- 构建工具：Electron Builder

## 项目结构
```
MagicWall/
├── README.md           # 项目说明文档
├── package.json        # 项目依赖配置
├── src/
│   ├── index.html      # 入口文件
│   ├── css/
│   │   └── styles.css  # 样式文件
│   ├── js/
│   │   ├── app.js      # 应用主逻辑
│   │   ├── mode.js     # 模式切换逻辑
│   │   └── animation.js # 动画效果实现
│   └── assets/         # 静态资源（图片、视频等）
└── dist/               # 构建输出目录
```

### assets 文件夹使用说明
`src/assets/` 文件夹用于存放应用的所有静态资源，包括图片、视频、音频等文件。在代码中引用这些资源时，请使用相对路径，例如：

```html
<img src="./assets/image.png" alt="示例图片">
```

```css
background-image: url('../assets/background.jpg');
```

请确保将所有静态资源文件放入此文件夹中，以便更好地组织和管理项目文件。

## 配置说明
在 `src/js/mode.js` 中可以配置两种模式的参数：
- `DEBUG_MODE`: 是否启用调试模式
- `SCREEN_WIDTH`: 产品模式下的屏幕宽度（默认9050px，对应9.05米）
- `SCREEN_HEIGHT`: 产品模式下的屏幕高度（默认1800px，对应1.80米）
- `SCREEN_RATIO`: 屏幕比例（9.05米 × 1.80米的比例，约5.028）
- `DEBUG_WINDOW_HEIGHT`: 调试模式下的窗口高度（默认600px）
- `DEBUG_WINDOW_WIDTH`: 调试模式下的窗口宽度（根据屏幕比例自动计算，默认约3017px）

**注**：调试模式的界面窗口尺寸会严格按照产品模式的屏幕比例（9.05米 × 1.80米）进行缩放显示，以确保开发调试与最终展示效果的一致性。

## 环境变量
- `OPEN_DEV_TOOLS`: 控制在调试模式下是否打开开发者工具，默认为 `true`。设置为 `false` 可以在调试模式下不打开控制台。

## 窗口比例与响应式设计
应用设计用于9.05米×1.80米的物理展示屏幕，具有精确的宽横屏比例（≈5.028）。为确保在不同模式和设备上的一致性体验，我们采用了以下设计原则：

### 比例保持机制
1. **屏幕比例计算**：9.05米 ÷ 1.80米 ≈ 5.028
2. **调试模式窗口尺寸**：默认高度600px，宽度按比例计算约为3017px
3. **产品模式窗口尺寸**：9050px × 1800px
4. **窗口比例保持**：应用会监听窗口大小变化事件，当用户调整窗口大小时，自动保持正确的屏幕比例
5. **屏幕适配**：应用会自动检测屏幕尺寸，如果窗口尺寸超出屏幕边界，会按比例缩小以适应屏幕

### 响应式布局技术方案
为确保在不同模式下内容布局的一致性，我们采用了以下技术方案：

1. **相对单位使用**：
   - 所有UI元素尺寸均使用相对单位（如百分比、rem、em）而非绝对像素值
   - 间距和边距使用相对单位，确保在不同尺寸下保持比例关系

2. **弹性布局系统**：
   - 使用CSS Flexbox和Grid布局实现自适应排列
   - 容器元素设置适当的flex属性，确保内容在不同宽度下正确流动

3. **媒体查询**：
   - 根据屏幕尺寸和比例应用不同的样式规则
   - 针对调试模式和产品模式的差异进行优化调整

4. **动态计算**：
   - 在JavaScript中根据当前窗口尺寸动态计算元素位置和大小
   - 使用`SCREEN_RATIO`常量确保计算的一致性

5. **图像适配**：
   - 所有图像资源使用矢量格式（如SVG）或高分辨率位图
   - 图片使用`max-width: 100%`和`height: auto`确保正确缩放

这些技术确保了应用在不同模式下都能按照正确的尺寸和比例显示，同时保持与目标物理屏幕的一致性，并且能够适应不同尺寸的显示设备。无论在开发调试阶段还是最终展示阶段，内容布局和视觉效果都能保持一致。

## 启动模式选择
应用启动时会显示一个模式选择对话框，用户需要选择运行模式：

1. **调试模式**：适用于开发人员进行界面调试和开发，窗口尺寸会根据9.05:1.80比例自动计算，默认高度为600px。
2. **产品模式**：适用于最终展示，窗口将设置为完整的物理屏幕尺寸（9050px × 1800px）。

用户的选择将决定应用的窗口尺寸和行为，确保在不同场景下都能获得最佳的使用体验。

## Git 忽略配置

项目包含一个 `.gitignore` 文件，用于配置 Git 忽略不需要版本控制的文件和文件夹。该文件已经配置了常见的忽略规则，包括：

- `node_modules/`：Node.js 依赖包
- `dist/`：构建输出目录
- `src/assets/*`：静态资源文件（除了 `.gitkeep` 文件）
- 日志文件、环境变量文件、IDE 配置文件等

这样可以确保只将必要的源代码和配置文件纳入版本控制，避免将不必要的文件提交到仓库中。